{%- comment -%}
========================================
KEY BENEFITS - CLAUDE TEMPLATE
========================================

This section displays product benefits in a grid layout.
Fully editable through blocks in the theme customizer.
{%- endcomment -%}

{%- if section.blocks.size > 0 -%}
  {%- assign color_scheme_hash = section.settings.color_scheme.settings.background_gradient | default: section.settings.color_scheme.settings.background | md5 -%}

  <div class="section-spacing color-scheme color-scheme--{{ section.settings.color_scheme.id }} color-scheme--bg-{{ color_scheme_hash }} {% if section.settings.separate_section_with_border %}bordered-section{% endif %}">
    <div class="container">
      <div class="section-stack">
        {%- render 'section-header', subheading: section.settings.subheading, heading: section.settings.title, content: section.settings.content -%}

        <div class="key-benefits" style="--benefits-per-row-mobile: {{ section.settings.benefits_per_row_mobile }}; --benefits-per-row-desktop: {{ section.settings.benefits_per_row_desktop }};">
          {%- for block in section.blocks -%}
            <div class="key-benefits__item" {{ block.shopify_attributes }}>
              {%- if block.settings.custom_icon != blank -%}
                {%- capture sizes -%}{{ block.settings.icon_width }}px{%- endcapture -%}
                {%- capture widths -%}{{ block.settings.icon_width }}, {{ block.settings.icon_width | times: 2 | at_most: block.settings.custom_icon.width }}{%- endcapture -%}
                {%- capture style -%}--image-max-width: {{ block.settings.icon_width }}px{%- endcapture -%}
                <div class="key-benefits__icon">
                  {{- block.settings.custom_icon | image_url: width: block.settings.custom_icon.width | image_tag: sizes: sizes, widths: widths, class: 'constrained-image', style: style -}}
                </div>
              {%- elsif block.settings.icon != 'none' -%}
                <div class="key-benefits__icon" style="color: {{ block.settings.icon_color }}">
                  {%- render 'icon' with block.settings.icon, width: 48, height: 48 -%}
                </div>
              {%- endif -%}

              {%- if block.settings.heading != blank -%}
                <h3 class="key-benefits__heading">{{ block.settings.heading }}</h3>
              {%- endif -%}

              {%- if block.settings.text != blank -%}
                <div class="key-benefits__text prose">
                  {{ block.settings.text }}
                </div>
              {%- endif -%}
            </div>
          {%- endfor -%}
        </div>
      </div>
    </div>
  </div>

  <style>
    .key-benefits {
      display: grid;
      grid-template-columns: repeat(var(--benefits-per-row-mobile), 1fr);
      gap: 2.5rem 2rem;
    }

    .key-benefits__item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 1rem;
    }

    .key-benefits__icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 64px;
      height: 64px;
      flex-shrink: 0;
    }

    .key-benefits__icon svg {
      width: 100%;
      height: 100%;
    }

    .key-benefits__heading {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 0;
      line-height: 1.3;
    }

    .key-benefits__text {
      font-size: 0.95rem;
      line-height: 1.6;
      margin: 0;
    }

    @media screen and (min-width: 750px) {
      .key-benefits {
        grid-template-columns: repeat(var(--benefits-per-row-desktop), 1fr);
        gap: 3rem 2.5rem;
      }

      .key-benefits__icon {
        width: 80px;
        height: 80px;
      }

      .key-benefits__heading {
        font-size: 1.4rem;
      }

      .key-benefits__text {
        font-size: 1rem;
      }
    }
  </style>
{%- endif -%}

{% schema %}
{
  "name": "Key Benefits - Claude",
  "class": "shopify-section--key-benefits-claude",
  "tag": "section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "separate_section_with_border",
      "label": "Separate section with border",
      "default": true
    },
    {
      "type": "header",
      "content": "Section header"
    },
    {
      "type": "inline_richtext",
      "id": "subheading",
      "label": "Subheading",
      "default": "Why Choose Us"
    },
    {
      "type": "inline_richtext",
      "id": "title",
      "label": "Heading",
      "default": "Key Benefits"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "benefits_per_row_mobile",
      "min": 1,
      "max": 2,
      "step": 1,
      "label": "Benefits per row (mobile)",
      "default": 2
    },
    {
      "type": "range",
      "id": "benefits_per_row_desktop",
      "min": 2,
      "max": 6,
      "step": 1,
      "label": "Benefits per row (desktop)",
      "default": 4
    }
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefit",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "none",
              "label": "None"
            },
            {
              "value": "checkmark",
              "label": "Checkmark"
            },
            {
              "value": "leaf",
              "label": "Leaf"
            },
            {
              "value": "heart",
              "label": "Heart"
            },
            {
              "value": "sparkles",
              "label": "Sparkles"
            },
            {
              "value": "recycle",
              "label": "Recycle"
            },
            {
              "value": "award",
              "label": "Award"
            },
            {
              "value": "lock",
              "label": "Lock"
            },
            {
              "value": "shipment",
              "label": "Shipping"
            },
            {
              "value": "clock",
              "label": "Clock"
            },
            {
              "value": "star",
              "label": "Star"
            }
          ],
          "default": "leaf"
        },
        {
          "type": "image_picker",
          "id": "custom_icon",
          "label": "Custom icon image (optional)",
          "info": "Replaces the icon if provided"
        },
        {
          "type": "range",
          "id": "icon_width",
          "min": 32,
          "max": 120,
          "step": 4,
          "unit": "px",
          "label": "Icon width",
          "default": 64
        },
        {
          "type": "color",
          "id": "icon_color",
          "label": "Icon color",
          "default": "#ab8f80"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Benefit Heading"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Description",
          "default": "Describe the benefit here. Explain how it helps your customers."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Key Benefits - Claude",
      "blocks": [
        {
          "type": "benefit",
          "settings": {
            "icon": "leaf",
            "heading": "Natural & Pure",
            "text": "Made with 100% natural ingredients",
            "icon_color": "#ab8f80"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "icon": "heart",
            "heading": "Gentle Formula",
            "text": "Suitable for all skin types",
            "icon_color": "#ab8f80"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "icon": "sparkles",
            "heading": "Visible Results",
            "text": "See improvements in 2-4 weeks",
            "icon_color": "#ab8f80"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "icon": "recycle",
            "heading": "Sustainable",
            "text": "Eco-friendly packaging",
            "icon_color": "#ab8f80"
          }
        }
      ]
    }
  ]
}
{% endschema %}
