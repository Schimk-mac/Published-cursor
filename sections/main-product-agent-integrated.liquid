{%- comment -%}
========================================
PRODUCT PAGE - AGENT INTEGRATED
========================================

This section brings together the work of all three agents:
- Agent 1: Product Gallery (images, videos, 3D models, zoom)
- Agent 2: Product Info (pricing, variants, add to cart)
- Agent 3: Product Extras (reviews, shipping, FAQ, related products)

This is the integrated reference implementation showing how
all components work together seamlessly.
{%- endcomment -%}

{%- liquid
  assign color_scheme_hash = section.settings.color_scheme.settings.background_gradient | default: section.settings.color_scheme.settings.background | md5
  capture product_form_id
    echo 'product-form-agent-integrated-' | append: product.id | append: '-' | append: section.id
  endcapture
-%}

<style>
  #shopify-section-{{ section.id }} {
    --product-grid: "product-gallery" "product-info" "product-extras" / minmax(0, 1fr);
  }

  @media screen and (min-width: 1000px) {
    #shopify-section-{{ section.id }} {
      --product-grid: "product-gallery product-info" auto "product-extras product-info" minmax(0, 1fr) / minmax(0, 1fr) minmax(0, 420px);
    }
  }
</style>

<div class="section-spacing section-spacing--tight color-scheme color-scheme--{{ section.settings.color_scheme.id }} color-scheme--bg-{{ color_scheme_hash }}">
  <div class="container {% unless section.settings.container_size == 'full' %}container--{{ section.settings.container_size }}{% endunless %}">
    <product-rerender id="product-info-{{ product.id }}-{{ section.id }}" observe-form="{{ product_form_id }}" allow-partial-rerender>
      <div class="product">

        {%- comment -%}========== AGENT 1: PRODUCT GALLERY =========={%- endcomment -%}
        {%- if product.media.size > 0 -%}
          {%- render 'product-gallery-agent1',
              product: product,
              product_form_id: product_form_id,
              enable_image_zoom: section.settings.enable_image_zoom,
              mobile_controls: section.settings.mobile_controls,
              enable_media_autoplay: section.settings.enable_media_autoplay,
              enable_video_looping: section.settings.enable_video_looping,
              desktop_layout: section.settings.desktop_media_layout -%}
        {%- endif -%}

        {%- comment -%}========== AGENT 2: PRODUCT INFO & PURCHASE =========={%- endcomment -%}
        {%- render 'product-info-agent2',
          product: product,
          product_form_id: product_form_id,
          context: 'main_product_integrated' -%}

        {%- comment -%}========== AGENT 3: PRODUCT EXTRAS =========={%- endcomment -%}
        {%- render 'product-extras-agent3',
          product: product -%}

      </div>
    </product-rerender>
  </div>
</div>

{%- comment -%}========== INTEGRATION NOTES =========={%- endcomment -%}
{%- comment -%}
This section demonstrates the seamless integration of all three agent components:

1. Agent 1 handles all media display (gallery, carousel, zoom, videos, 3D models)
2. Agent 2 manages product information, pricing, variants, and purchase functionality
3. Agent 3 provides additional context (reviews, shipping, FAQ, related products)

Each agent works independently without overlapping responsibilities, ensuring
clean code, maintainability, and scalability. They communicate through standard
Shopify APIs and custom events.

To enable this section:
1. Assign it to product templates
2. Configure settings for each agent's features
3. Test across desktop, tablet, and mobile devices

For more information, see:
- AGENT-COORDINATION.md (Multi-agent workflow guide)
- AGENT3-INTEGRATION-GUIDE.md (Agent 3 specific details)
{%- endcomment -%}

{% schema %}
{
  "name": "Product - Agent Integrated",
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "Accent 1"
        },
        {
          "value": "accent-2",
          "label": "Accent 2"
        },
        {
          "value": "accent-3",
          "label": "Accent 3"
        },
        {
          "value": "accent-4",
          "label": "Accent 4"
        },
        {
          "value": "accent-5",
          "label": "Accent 5"
        },
        {
          "value": "accent-6",
          "label": "Accent 6"
        },
        {
          "value": "background-1",
          "label": "Background 1"
        },
        {
          "value": "background-2",
          "label": "Background 2"
        }
      ],
      "default": "background-1",
      "label": "Color scheme"
    },
    {
      "type": "select",
      "id": "container_size",
      "options": [
        {
          "value": "page-width",
          "label": "Page width"
        },
        {
          "value": "large",
          "label": "Large"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "full",
          "label": "Full width"
        }
      ],
      "default": "page-width",
      "label": "Container size"
    },
    {
      "type": "header",
      "content": "Agent 1: Gallery Settings"
    },
    {
      "type": "select",
      "id": "desktop_media_layout",
      "options": [
        {
          "value": "carousel_thumbnails_left",
          "label": "Carousel with left thumbnails"
        },
        {
          "value": "carousel_thumbnails_bottom",
          "label": "Carousel with bottom thumbnails"
        }
      ],
      "default": "carousel_thumbnails_left",
      "label": "Desktop media layout"
    },
    {
      "type": "select",
      "id": "mobile_controls",
      "options": [
        {
          "value": "thumbnails",
          "label": "Thumbnails"
        },
        {
          "value": "arrows",
          "label": "Arrows"
        }
      ],
      "default": "thumbnails",
      "label": "Mobile carousel controls"
    },
    {
      "type": "checkbox",
      "id": "enable_image_zoom",
      "label": "Enable image zoom",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_media_autoplay",
      "label": "Autoplay media",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "Loop videos",
      "default": false
    }
  ]
}
{% endschema %}
